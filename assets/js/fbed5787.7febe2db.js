"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[155],{8570:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var i=n(79);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||p[h]||a;return n?i.createElement(m,o(o({ref:t},u),{},{components:n})):i.createElement(m,o({ref:t},u))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<a;c++)o[c]=n[c];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},8139:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var i=n(5675),r=(n(79),n(8570));const a={},o="API Authorization",s={unversionedId:"dev/submissions/api-authorization",id:"dev/submissions/api-authorization",title:"API Authorization",description:"Requests to the API must be authenticated and authorized.",source:"@site/docs/dev/submissions/api-authorization.md",sourceDirName:"dev/submissions",slug:"/dev/submissions/api-authorization",permalink:"/dev/submissions/api-authorization",draft:!1,editUrl:"https://github.com/biobankinguk/biobankinguk/edit/main/docs/docs/dev/submissions/api-authorization.md",tags:[],version:"current",frontMatter:{},sidebar:"devGuide",previous:{title:"Email Sending",permalink:"/dev/directory/email-sending"},next:{title:"API Services",permalink:"/dev/submissions/api-services"}},l={},c=[{value:"Token Auth",id:"token-auth",level:2},{value:"Basic Auth",id:"basic-auth",level:2},{value:"Client Credentials",id:"client-credentials",level:2}],u={toc:c},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,i.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"api-authorization"},"API Authorization"),(0,r.kt)("p",null,"Requests to the API must be authenticated and authorized."),(0,r.kt)("h2",{id:"token-auth"},"Token Auth"),(0,r.kt)("p",null,"Endpoints intended for public consumption are token authenticated. The following describes"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"First an API Client must exchange valid credentials with the ",(0,r.kt)("inlineCode",{parentName:"li"},"/token")," endpoint, to get an access token."),(0,r.kt)("li",{parentName:"ol"},"The token can be used with interactions on all other endpoints until it expires (1 day after issue currently)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"in the event a token has expired, a new one may be acquired provided credentials are still valid.")))),(0,r.kt)("h2",{id:"basic-auth"},"Basic Auth"),(0,r.kt)("p",null,"Internally used endpoints (e.g. for the Directory web app to hit) usually just accept the Directory's Client Credentials over Basic Auth, the same mechanism as for requesting a token."),(0,r.kt)("h2",{id:"client-credentials"},"Client Credentials"),(0,r.kt)("p",null,"Valid Client Credentials means a matching record in the ",(0,r.kt)("inlineCode",{parentName:"p"},"ApiClients")," table for a Client ID and a hashed Client Secret."),(0,r.kt)("p",null,"Ideally, API Clients are added to Organisations through the Directory Frontend.\nIf that is not an option, it is recommended to use the ",(0,r.kt)("a",{parentName:"p",href:"/dev/cli/api"},"Directory cli")," to add clients, or at least to generate credentials."),(0,r.kt)("p",null,"ApiClients are usually associated with Biobanks and the API verifies that the access token in use is authorised to act on a given Biobank's data."),(0,r.kt)("p",null,"The ",(0,r.kt)("a",{parentName:"p",href:"/dev/cli/api"},"Directory cli")," is the only way to add credentials that aren't Biobank affiliated, for use at a system level (e.g. by the Directory web app)."))}p.isMDXComponent=!0}}]);