@using Biobanks.Directory.Data.Constants;
@using Biobanks.Web.Models.Home
@using System.Web.Optimization
@model HomepageContentModel

@Scripts.Render("~/bundles/home/search-tabs")


    <ul id="searchtabs" class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#_DiagnosisSearchBox" role="tab" data-toggle="tab">Diagnosis</a>
        </li>
        @if (App.Config[ConfigKey.DisplayPublicationSearch] != "false")
        {
            <li>
                <a href="#_PublicationSearchBox" role="tab" data-toggle="tab">Publication</a>
            </li>
        }
        </ul>


<div class="tab-content">
    <div class="tab-pane fade in active" id="_DiagnosisSearchBox">
        @Html.Partial("~/Views/Home/_DiagnosisSearchBox.cshtml", Model)
    </div>
    <div class="tab-pane fade" id="_PublicationSearchBox">

    </div>
</div>


<script>
    $('#searchtabs a').click(function (e) {
        e.preventDefault()
        var tabID = $(this).attr("href").substr(1);
        $(".tab-pane").each(function () {
            console.log("clearing " + $(this).attr("id") + " tab");
            $(this).empty();
        });

        $.ajax({
            url: "Home/" + tabID,
            cache: false,
            type: "get",
            dataType: "html",
            success: function (result) {
                $("#" + tabID).html(result);
            }

        })
        $(this).tab('show')
    });
</script>